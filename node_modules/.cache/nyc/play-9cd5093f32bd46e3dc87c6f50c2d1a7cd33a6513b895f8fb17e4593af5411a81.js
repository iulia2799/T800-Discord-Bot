function cov_ylgg727rz(){var path="C:\\Users\\Shak_al_CR\\Desktop\\T800-Discord-Bot\\src\\commands\\play.js";var hash="d2ec35d8c4b396d880593b2f7abb04cf9bea4426";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Shak_al_CR\\Desktop\\T800-Discord-Bot\\src\\commands\\play.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:33}},"1":{start:{line:2,column:17},end:{line:2,column:37}},"2":{start:{line:3,column:14},end:{line:3,column:23}},"3":{start:{line:4,column:0},end:{line:74,column:1}},"4":{start:{line:10,column:29},end:{line:10,column:57}},"5":{start:{line:11,column:29},end:{line:11,column:56}},"6":{start:{line:12,column:8},end:{line:12,column:111}},"7":{start:{line:12,column:27},end:{line:12,column:111}},"8":{start:{line:13,column:28},end:{line:13,column:76}},"9":{start:{line:14,column:8},end:{line:14,column:110}},"10":{start:{line:14,column:41},end:{line:14,column:110}},"11":{start:{line:15,column:8},end:{line:15,column:108}},"12":{start:{line:15,column:39},end:{line:15,column:108}},"13":{start:{line:16,column:25},end:{line:16,column:75}},"14":{start:{line:16,column:59},end:{line:16,column:74}},"15":{start:{line:17,column:8},end:{line:18,column:61}},"16":{start:{line:17,column:48},end:{line:17,column:63}},"17":{start:{line:18,column:12},end:{line:18,column:61}},"18":{start:{line:19,column:8},end:{line:66,column:9}},"19":{start:{line:20,column:12},end:{line:20,column:99}},"20":{start:{line:20,column:30},end:{line:20,column:99}},"21":{start:{line:21,column:22},end:{line:21,column:24}},"22":{start:{line:23,column:12},end:{line:40,column:13}},"23":{start:{line:24,column:34},end:{line:24,column:61}},"24":{start:{line:25,column:16},end:{line:25,column:102}},"25":{start:{line:28,column:37},end:{line:31,column:17}},"26":{start:{line:29,column:41},end:{line:29,column:62}},"27":{start:{line:30,column:20},end:{line:30,column:92}},"28":{start:{line:33,column:30},end:{line:33,column:64}},"29":{start:{line:34,column:16},end:{line:38,column:17}},"30":{start:{line:35,column:20},end:{line:35,column:65}},"31":{start:{line:37,column:20},end:{line:37,column:65}},"32":{start:{line:41,column:12},end:{line:64,column:13}},"33":{start:{line:42,column:42},end:{line:47,column:17}},"34":{start:{line:48,column:16},end:{line:48,column:62}},"35":{start:{line:49,column:16},end:{line:49,column:51}},"36":{start:{line:51,column:16},end:{line:59,column:17}},"37":{start:{line:52,column:39},end:{line:52,column:64}},"38":{start:{line:53,column:20},end:{line:53,column:62}},"39":{start:{line:54,column:20},end:{line:54,column:75}},"40":{start:{line:56,column:20},end:{line:56,column:51}},"41":{start:{line:57,column:20},end:{line:57,column:70}},"42":{start:{line:58,column:20},end:{line:58,column:30}},"43":{start:{line:62,column:16},end:{line:62,column:46}},"44":{start:{line:63,column:16},end:{line:63,column:84}},"45":{start:{line:67,column:8},end:{line:69,column:9}},"46":{start:{line:68,column:12},end:{line:68,column:44}},"47":{start:{line:70,column:8},end:{line:72,column:9}},"48":{start:{line:71,column:12},end:{line:71,column:44}},"49":{start:{line:75,column:21},end:{line:90,column:1}},"50":{start:{line:76,column:24},end:{line:76,column:43}},"51":{start:{line:78,column:4},end:{line:82,column:5}},"52":{start:{line:79,column:8},end:{line:79,column:41}},"53":{start:{line:80,column:8},end:{line:80,column:31}},"54":{start:{line:81,column:8},end:{line:81,column:15}},"55":{start:{line:83,column:19},end:{line:83,column:56}},"56":{start:{line:84,column:4},end:{line:88,column:11}},"57":{start:{line:86,column:12},end:{line:86,column:37}},"58":{start:{line:87,column:12},end:{line:87,column:52}},"59":{start:{line:89,column:4},end:{line:89,column:74}},"60":{start:{line:91,column:18},end:{line:97,column:1}},"61":{start:{line:92,column:4},end:{line:92,column:123}},"62":{start:{line:92,column:39},end:{line:92,column:123}},"63":{start:{line:93,column:4},end:{line:95,column:5}},"64":{start:{line:94,column:8},end:{line:94,column:70}},"65":{start:{line:96,column:4},end:{line:96,column:45}},"66":{start:{line:99,column:18},end:{line:103,column:1}},"67":{start:{line:100,column:4},end:{line:100,column:123}},"68":{start:{line:100,column:39},end:{line:100,column:123}},"69":{start:{line:101,column:4},end:{line:101,column:28}},"70":{start:{line:102,column:4},end:{line:102,column:45}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:41},end:{line:73,column:5}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:16,column:56},end:{line:16,column:57}},loc:{start:{line:16,column:59},end:{line:16,column:74}},line:16},"2":{name:"(anonymous_2)",decl:{start:{line:17,column:44},end:{line:17,column:45}},loc:{start:{line:17,column:48},end:{line:17,column:63}},line:17},"3":{name:"(anonymous_3)",decl:{start:{line:28,column:37},end:{line:28,column:38}},loc:{start:{line:28,column:53},end:{line:31,column:17}},line:28},"4":{name:"(anonymous_4)",decl:{start:{line:75,column:21},end:{line:75,column:22}},loc:{start:{line:75,column:43},end:{line:90,column:1}},line:75},"5":{name:"(anonymous_5)",decl:{start:{line:85,column:22},end:{line:85,column:23}},loc:{start:{line:85,column:27},end:{line:88,column:9}},line:85},"6":{name:"(anonymous_6)",decl:{start:{line:91,column:18},end:{line:91,column:19}},loc:{start:{line:91,column:45},end:{line:97,column:1}},line:91},"7":{name:"(anonymous_7)",decl:{start:{line:99,column:18},end:{line:99,column:19}},loc:{start:{line:99,column:45},end:{line:103,column:1}},line:99}},branchMap:{"0":{loc:{start:{line:12,column:8},end:{line:12,column:111}},type:"if",locations:[{start:{line:12,column:8},end:{line:12,column:111}},{start:{line:12,column:8},end:{line:12,column:111}}],line:12},"1":{loc:{start:{line:14,column:8},end:{line:14,column:110}},type:"if",locations:[{start:{line:14,column:8},end:{line:14,column:110}},{start:{line:14,column:8},end:{line:14,column:110}}],line:14},"2":{loc:{start:{line:15,column:8},end:{line:15,column:108}},type:"if",locations:[{start:{line:15,column:8},end:{line:15,column:108}},{start:{line:15,column:8},end:{line:15,column:108}}],line:15},"3":{loc:{start:{line:17,column:8},end:{line:18,column:61}},type:"if",locations:[{start:{line:17,column:8},end:{line:18,column:61}},{start:{line:17,column:8},end:{line:18,column:61}}],line:17},"4":{loc:{start:{line:17,column:11},end:{line:17,column:99}},type:"binary-expr",locations:[{start:{line:17,column:11},end:{line:17,column:64}},{start:{line:17,column:68},end:{line:17,column:99}}],line:17},"5":{loc:{start:{line:19,column:8},end:{line:66,column:9}},type:"if",locations:[{start:{line:19,column:8},end:{line:66,column:9}},{start:{line:19,column:8},end:{line:66,column:9}}],line:19},"6":{loc:{start:{line:20,column:12},end:{line:20,column:99}},type:"if",locations:[{start:{line:20,column:12},end:{line:20,column:99}},{start:{line:20,column:12},end:{line:20,column:99}}],line:20},"7":{loc:{start:{line:23,column:12},end:{line:40,column:13}},type:"if",locations:[{start:{line:23,column:12},end:{line:40,column:13}},{start:{line:23,column:12},end:{line:40,column:13}}],line:23},"8":{loc:{start:{line:30,column:27},end:{line:30,column:91}},type:"cond-expr",locations:[{start:{line:30,column:62},end:{line:30,column:84}},{start:{line:30,column:87},end:{line:30,column:91}}],line:30},"9":{loc:{start:{line:34,column:16},end:{line:38,column:17}},type:"if",locations:[{start:{line:34,column:16},end:{line:38,column:17}},{start:{line:34,column:16},end:{line:38,column:17}}],line:34},"10":{loc:{start:{line:41,column:12},end:{line:64,column:13}},type:"if",locations:[{start:{line:41,column:12},end:{line:64,column:13}},{start:{line:41,column:12},end:{line:64,column:13}}],line:41},"11":{loc:{start:{line:67,column:8},end:{line:69,column:9}},type:"if",locations:[{start:{line:67,column:8},end:{line:69,column:9}},{start:{line:67,column:8},end:{line:69,column:9}}],line:67},"12":{loc:{start:{line:70,column:8},end:{line:72,column:9}},type:"if",locations:[{start:{line:70,column:8},end:{line:72,column:9}},{start:{line:70,column:8},end:{line:72,column:9}}],line:70},"13":{loc:{start:{line:78,column:4},end:{line:82,column:5}},type:"if",locations:[{start:{line:78,column:4},end:{line:82,column:5}},{start:{line:78,column:4},end:{line:82,column:5}}],line:78},"14":{loc:{start:{line:92,column:4},end:{line:92,column:123}},type:"if",locations:[{start:{line:92,column:4},end:{line:92,column:123}},{start:{line:92,column:4},end:{line:92,column:123}}],line:92},"15":{loc:{start:{line:93,column:4},end:{line:95,column:5}},type:"if",locations:[{start:{line:93,column:4},end:{line:95,column:5}},{start:{line:93,column:4},end:{line:95,column:5}}],line:93},"16":{loc:{start:{line:100,column:4},end:{line:100,column:123}},type:"if",locations:[{start:{line:100,column:4},end:{line:100,column:123}},{start:{line:100,column:4},end:{line:100,column:123}}],line:100}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d2ec35d8c4b396d880593b2f7abb04cf9bea4426"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_ylgg727rz=function(){return actualCoverage;};}return actualCoverage;}cov_ylgg727rz();const ytdl=(cov_ylgg727rz().s[0]++,require('ytdl-core'));const ytSearch=(cov_ylgg727rz().s[1]++,require('yt-search'));const queue=(cov_ylgg727rz().s[2]++,new Map());cov_ylgg727rz().s[3]++;module.exports={name:'play',aliases:['skip','stop'],cooldown:0,description:'Joins and plays a video from youtube',async execute(message,args,command){cov_ylgg727rz().f[0]++;const voiceChannel=(cov_ylgg727rz().s[4]++,message.member.voice.channel);const server_queue=(cov_ylgg727rz().s[5]++,queue.get(message.guild.id));cov_ylgg727rz().s[6]++;if(!voiceChannel){cov_ylgg727rz().b[0][0]++;cov_ylgg727rz().s[7]++;return message.channel.send('You need to be in a channel to execute this command!');}else{cov_ylgg727rz().b[0][1]++;}const permissions=(cov_ylgg727rz().s[8]++,voiceChannel.permissionsFor(message.client.user));cov_ylgg727rz().s[9]++;if(!permissions.has('CONNECT')){cov_ylgg727rz().b[1][0]++;cov_ylgg727rz().s[10]++;return message.channel.send('You dont have the correct permissions');}else{cov_ylgg727rz().b[1][1]++;}cov_ylgg727rz().s[11]++;if(!permissions.has('SPEAK')){cov_ylgg727rz().b[2][0]++;cov_ylgg727rz().s[12]++;return message.channel.send('You dont have the correct permissions');}else{cov_ylgg727rz().b[2][1]++;}let resultrole=(cov_ylgg727rz().s[13]++,message.guild.roles.cache.find(r=>{cov_ylgg727rz().f[1]++;cov_ylgg727rz().s[14]++;return r.name==="DJ";}));cov_ylgg727rz().s[15]++;if((cov_ylgg727rz().b[4][0]++,!message.member.roles.cache.some(r=>{cov_ylgg727rz().f[2]++;cov_ylgg727rz().s[16]++;return r.name==="DJ";}))&&(cov_ylgg727rz().b[4][1]++,typeof resultrole===undefined)){cov_ylgg727rz().b[3][0]++;cov_ylgg727rz().s[17]++;return message.channel.send('You are not a DJ!');}else{cov_ylgg727rz().b[3][1]++;}cov_ylgg727rz().s[18]++;if(command==='play'){cov_ylgg727rz().b[5][0]++;cov_ylgg727rz().s[19]++;if(!args.length){cov_ylgg727rz().b[6][0]++;cov_ylgg727rz().s[20]++;return message.channel.send('You need to send the second argument!');}else{cov_ylgg727rz().b[6][1]++;}let song=(cov_ylgg727rz().s[21]++,{});cov_ylgg727rz().s[22]++;if(ytdl.validateURL(args[0])){cov_ylgg727rz().b[7][0]++;const song_info=(cov_ylgg727rz().s[23]++,await ytdl.getInfo(args[0]));cov_ylgg727rz().s[24]++;song={title:song_info.videoDetails.title,url:song_info.videoDetails.video_url};}else{cov_ylgg727rz().b[7][1]++;cov_ylgg727rz().s[25]++;const video_finder=async query=>{cov_ylgg727rz().f[3]++;const video_result=(cov_ylgg727rz().s[26]++,await ytSearch(query));cov_ylgg727rz().s[27]++;return video_result.videos.length>1?(cov_ylgg727rz().b[8][0]++,video_result.videos[0]):(cov_ylgg727rz().b[8][1]++,null);};const video=(cov_ylgg727rz().s[28]++,await video_finder(args.join(' ')));cov_ylgg727rz().s[29]++;if(video){cov_ylgg727rz().b[9][0]++;cov_ylgg727rz().s[30]++;song={title:video.title,url:video.url};}else{cov_ylgg727rz().b[9][1]++;cov_ylgg727rz().s[31]++;message.channel.send('Error finding video.');}}cov_ylgg727rz().s[32]++;if(!server_queue){cov_ylgg727rz().b[10][0]++;const queue_constructor=(cov_ylgg727rz().s[33]++,{voice_channel:voiceChannel,text_channel:message.channel,connection:null,songs:[]});cov_ylgg727rz().s[34]++;queue.set(message.guild.id,queue_constructor);cov_ylgg727rz().s[35]++;queue_constructor.songs.push(song);cov_ylgg727rz().s[36]++;try{const connection=(cov_ylgg727rz().s[37]++,await voiceChannel.join());cov_ylgg727rz().s[38]++;queue_constructor.connection=connection;cov_ylgg727rz().s[39]++;video_player(message.guild,queue_constructor.songs[0]);}catch(err){cov_ylgg727rz().s[40]++;queue.delete(message.guild.id);cov_ylgg727rz().s[41]++;message.channel.send("There was an error...oops");cov_ylgg727rz().s[42]++;throw err;}}else{cov_ylgg727rz().b[10][1]++;cov_ylgg727rz().s[43]++;server_queue.songs.push(song);cov_ylgg727rz().s[44]++;return message.channel.send(`👍 **${song.title}** added to queue!`);}}else{cov_ylgg727rz().b[5][1]++;}cov_ylgg727rz().s[45]++;if(command==='skip'){cov_ylgg727rz().b[11][0]++;cov_ylgg727rz().s[46]++;skip_song(message,server_queue);}else{cov_ylgg727rz().b[11][1]++;}cov_ylgg727rz().s[47]++;if(command==='stop'){cov_ylgg727rz().b[12][0]++;cov_ylgg727rz().s[48]++;stop_song(message,server_queue);}else{cov_ylgg727rz().b[12][1]++;}}};cov_ylgg727rz().s[49]++;const video_player=async(guild,song)=>{cov_ylgg727rz().f[4]++;const song_queue=(cov_ylgg727rz().s[50]++,queue.get(guild.id));cov_ylgg727rz().s[51]++;if(!song){cov_ylgg727rz().b[13][0]++;cov_ylgg727rz().s[52]++;song_queue.voice_channel.leave();cov_ylgg727rz().s[53]++;queue.delete(guild.id);cov_ylgg727rz().s[54]++;return;}else{cov_ylgg727rz().b[13][1]++;}const stream=(cov_ylgg727rz().s[55]++,ytdl(song.url,{filter:'audioonly'}));cov_ylgg727rz().s[56]++;song_queue.connection.play(stream,{seek:0,volume:1}).on('finish',()=>{cov_ylgg727rz().f[5]++;cov_ylgg727rz().s[57]++;song_queue.songs.shift();cov_ylgg727rz().s[58]++;video_player(guild,song_queue.songs[0]);});cov_ylgg727rz().s[59]++;await song_queue.text_channel.send(`🎶 Now playing **${song.title}**`);};cov_ylgg727rz().s[60]++;const skip_song=(message,server_queue)=>{cov_ylgg727rz().f[6]++;cov_ylgg727rz().s[61]++;if(!message.member.voice.channel){cov_ylgg727rz().b[14][0]++;cov_ylgg727rz().s[62]++;return message.channel.send('You need to be in a channel to execute this command!');}else{cov_ylgg727rz().b[14][1]++;}cov_ylgg727rz().s[63]++;if(!server_queue){cov_ylgg727rz().b[15][0]++;cov_ylgg727rz().s[64]++;return message.channel.send(`There are no songs in queue 😔`);}else{cov_ylgg727rz().b[15][1]++;}cov_ylgg727rz().s[65]++;server_queue.connection.dispatcher.end();};cov_ylgg727rz().s[66]++;const stop_song=(message,server_queue)=>{cov_ylgg727rz().f[7]++;cov_ylgg727rz().s[67]++;if(!message.member.voice.channel){cov_ylgg727rz().b[16][0]++;cov_ylgg727rz().s[68]++;return message.channel.send('You need to be in a channel to execute this command!');}else{cov_ylgg727rz().b[16][1]++;}cov_ylgg727rz().s[69]++;server_queue.songs=[];cov_ylgg727rz().s[70]++;server_queue.connection.dispatcher.end();};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBsYXkuanMiXSwibmFtZXMiOlsieXRkbCIsInJlcXVpcmUiLCJ5dFNlYXJjaCIsInF1ZXVlIiwiTWFwIiwibW9kdWxlIiwiZXhwb3J0cyIsIm5hbWUiLCJhbGlhc2VzIiwiY29vbGRvd24iLCJkZXNjcmlwdGlvbiIsImV4ZWN1dGUiLCJtZXNzYWdlIiwiYXJncyIsImNvbW1hbmQiLCJ2b2ljZUNoYW5uZWwiLCJtZW1iZXIiLCJ2b2ljZSIsImNoYW5uZWwiLCJzZXJ2ZXJfcXVldWUiLCJnZXQiLCJndWlsZCIsImlkIiwic2VuZCIsInBlcm1pc3Npb25zIiwicGVybWlzc2lvbnNGb3IiLCJjbGllbnQiLCJ1c2VyIiwiaGFzIiwicmVzdWx0cm9sZSIsInJvbGVzIiwiY2FjaGUiLCJmaW5kIiwiciIsInNvbWUiLCJ1bmRlZmluZWQiLCJsZW5ndGgiLCJzb25nIiwidmFsaWRhdGVVUkwiLCJzb25nX2luZm8iLCJnZXRJbmZvIiwidGl0bGUiLCJ2aWRlb0RldGFpbHMiLCJ1cmwiLCJ2aWRlb191cmwiLCJ2aWRlb19maW5kZXIiLCJxdWVyeSIsInZpZGVvX3Jlc3VsdCIsInZpZGVvcyIsInZpZGVvIiwiam9pbiIsInF1ZXVlX2NvbnN0cnVjdG9yIiwidm9pY2VfY2hhbm5lbCIsInRleHRfY2hhbm5lbCIsImNvbm5lY3Rpb24iLCJzb25ncyIsInNldCIsInB1c2giLCJ2aWRlb19wbGF5ZXIiLCJlcnIiLCJkZWxldGUiLCJza2lwX3NvbmciLCJzdG9wX3NvbmciLCJzb25nX3F1ZXVlIiwibGVhdmUiLCJzdHJlYW0iLCJmaWx0ZXIiLCJwbGF5Iiwic2VlayIsInZvbHVtZSIsIm9uIiwic2hpZnQiLCJkaXNwYXRjaGVyIiwiZW5kIl0sIm1hcHBpbmdzIjoiNG9UQWVZO3lGQWZaLEtBQU1BLENBQUFBLElBQUkseUJBQUdDLE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBVixDQUNBLEtBQU1DLENBQUFBLFFBQVEseUJBQUdELE9BQU8sQ0FBQyxXQUFELENBQVYsQ0FBZCxDQUNB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QUNNLE9BQVIsQ0FBZ0JLLElBQWhCLENBQXNCLGdDQUF0QixDQUFQLENBQ0gsQ0FGRCxpQ0FGeUMsd0JBS3pDSixZQUFZLENBQUNtQyxVQUFiLENBQXdCa0IsVUFBeEIsQ0FBbUNDLEdBQW5DLEdBQ0gsQ0FORCxDLHdCQVFBLEtBQU1YLENBQUFBLFNBQVMsQ0FBRyxDQUFDbEQsT0FBRCxDQUFVTyxZQUFWLEdBQTJCLGdEQUN6QyxHQUFJLENBQUNQLE9BQU8sQ0FBQ0ksTUFBUixDQUFlQyxLQUFmLENBQXFCQyxPQUExQixDQUFtQywwREFBT04sQ0FBQUEsT0FBTyxDQUFDTSxPQUFSLENBQWdCSyxJQUFoQixDQUFxQixzREFBckIsQ0FBUCxDQUFvRixDQUF2SCxpQ0FEeUMsd0JBRXpDSixZQUFZLENBQUNvQyxLQUFiLENBQXFCLEVBQXJCLENBRnlDLHdCQUd6Q3BDLFlBQVksQ0FBQ21DLFVBQWIsQ0FBd0JrQixVQUF4QixDQUFtQ0MsR0FBbkMsR0FDSCxDQUpEIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeXRkbCA9IHJlcXVpcmUoJ3l0ZGwtY29yZScpO1xyXG5jb25zdCB5dFNlYXJjaCA9IHJlcXVpcmUoJ3l0LXNlYXJjaCcpO1xyXG5jb25zdCBxdWV1ZSA9IG5ldyBNYXAoKTtcclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBuYW1lOiAncGxheScsXHJcbiAgICBhbGlhc2VzIDogWydza2lwJywnc3RvcCddLFxyXG4gICAgY29vbGRvd246MCxcclxuICAgIGRlc2NyaXB0aW9uOiAnSm9pbnMgYW5kIHBsYXlzIGEgdmlkZW8gZnJvbSB5b3V0dWJlJyxcclxuICAgIGFzeW5jIGV4ZWN1dGUobWVzc2FnZSwgYXJncyxjb21tYW5kKSB7XHJcbiAgICAgICAgY29uc3Qgdm9pY2VDaGFubmVsID0gbWVzc2FnZS5tZW1iZXIudm9pY2UuY2hhbm5lbDtcclxuICAgICAgICBjb25zdCBzZXJ2ZXJfcXVldWUgPSBxdWV1ZS5nZXQobWVzc2FnZS5ndWlsZC5pZCk7XHJcbiAgICAgICAgaWYgKCF2b2ljZUNoYW5uZWwpIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZCgnWW91IG5lZWQgdG8gYmUgaW4gYSBjaGFubmVsIHRvIGV4ZWN1dGUgdGhpcyBjb21tYW5kIScpO1xyXG4gICAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gdm9pY2VDaGFubmVsLnBlcm1pc3Npb25zRm9yKG1lc3NhZ2UuY2xpZW50LnVzZXIpO1xyXG4gICAgICAgIGlmICghcGVybWlzc2lvbnMuaGFzKCdDT05ORUNUJykpIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZCgnWW91IGRvbnQgaGF2ZSB0aGUgY29ycmVjdCBwZXJtaXNzaW9ucycpO1xyXG4gICAgICAgIGlmICghcGVybWlzc2lvbnMuaGFzKCdTUEVBSycpKSByZXR1cm4gbWVzc2FnZS5jaGFubmVsLnNlbmQoJ1lvdSBkb250IGhhdmUgdGhlIGNvcnJlY3QgcGVybWlzc2lvbnMnKTtcclxuICAgICAgICBsZXQgcmVzdWx0cm9sZSA9IG1lc3NhZ2UuZ3VpbGQucm9sZXMuY2FjaGUuZmluZChyPT5yLm5hbWUgPT09IFwiREpcIik7XHJcbiAgICAgICAgaWYoIW1lc3NhZ2UubWVtYmVyLnJvbGVzLmNhY2hlLnNvbWUocj0+IHIubmFtZSA9PT0gXCJESlwiKSAmJiB0eXBlb2YgcmVzdWx0cm9sZSA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgICAgICByZXR1cm4gbWVzc2FnZS5jaGFubmVsLnNlbmQoJ1lvdSBhcmUgbm90IGEgREohJyk7XHJcbiAgICAgICAgaWYoY29tbWFuZCA9PT0gJ3BsYXknKSB7XHJcbiAgICAgICAgICAgIGlmICghYXJncy5sZW5ndGgpIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZCgnWW91IG5lZWQgdG8gc2VuZCB0aGUgc2Vjb25kIGFyZ3VtZW50IScpO1xyXG4gICAgICAgICAgICBsZXQgc29uZyA9e307XHJcblxyXG4gICAgICAgICAgICBpZih5dGRsLnZhbGlkYXRlVVJMKGFyZ3NbMF0pKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNvbmdfaW5mbyA9IGF3YWl0IHl0ZGwuZ2V0SW5mbyhhcmdzWzBdKTtcclxuICAgICAgICAgICAgICAgIHNvbmcgPSB7dGl0bGUgOiBzb25nX2luZm8udmlkZW9EZXRhaWxzLnRpdGxlLCB1cmwgOiBzb25nX2luZm8udmlkZW9EZXRhaWxzLnZpZGVvX3VybCB9XHJcblxyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlb19maW5kZXIgPSBhc3luYyAocXVlcnkpID0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvX3Jlc3VsdCA9IGF3YWl0IHl0U2VhcmNoKHF1ZXJ5KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHZpZGVvX3Jlc3VsdC52aWRlb3MubGVuZ3RoID4gMSkgPyB2aWRlb19yZXN1bHQudmlkZW9zWzBdIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB2aWRlbyA9IGF3YWl0IHZpZGVvX2ZpbmRlcihhcmdzLmpvaW4oJyAnKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmlkZW8pe1xyXG4gICAgICAgICAgICAgICAgICAgIHNvbmcgPSB7IHRpdGxlOiB2aWRlby50aXRsZSwgdXJsOiB2aWRlby51cmwgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmNoYW5uZWwuc2VuZCgnRXJyb3IgZmluZGluZyB2aWRlby4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIXNlcnZlcl9xdWV1ZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBxdWV1ZV9jb25zdHJ1Y3RvciA9IHtcclxuICAgICAgICAgICAgICAgICAgICB2b2ljZV9jaGFubmVsOiB2b2ljZUNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dF9jaGFubmVsIDogbWVzc2FnZS5jaGFubmVsLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb24gOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHNvbmdzOltdXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBxdWV1ZS5zZXQobWVzc2FnZS5ndWlsZC5pZCxxdWV1ZV9jb25zdHJ1Y3Rvcik7XHJcbiAgICAgICAgICAgICAgICBxdWV1ZV9jb25zdHJ1Y3Rvci5zb25ncy5wdXNoKHNvbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gYXdhaXQgdm9pY2VDaGFubmVsLmpvaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWV1ZV9jb25zdHJ1Y3Rvci5jb25uZWN0aW9uID0gY29ubmVjdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB2aWRlb19wbGF5ZXIobWVzc2FnZS5ndWlsZCxxdWV1ZV9jb25zdHJ1Y3Rvci5zb25nc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5kZWxldGUobWVzc2FnZS5ndWlsZC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5jaGFubmVsLnNlbmQoXCJUaGVyZSB3YXMgYW4gZXJyb3IuLi5vb3BzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGVycjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2VydmVyX3F1ZXVlLnNvbmdzLnB1c2goc29uZyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWVzc2FnZS5jaGFubmVsLnNlbmQoYPCfkY0gKioke3NvbmcudGl0bGV9KiogYWRkZWQgdG8gcXVldWUhYCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbW1hbmQgPT09ICdza2lwJyl7XHJcbiAgICAgICAgICAgIHNraXBfc29uZyhtZXNzYWdlLHNlcnZlcl9xdWV1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGNvbW1hbmQgPT09ICdzdG9wJyl7XHJcbiAgICAgICAgICAgIHN0b3Bfc29uZyhtZXNzYWdlLHNlcnZlcl9xdWV1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IHZpZGVvX3BsYXllciA9IGFzeW5jIChndWlsZCxzb25nKSA9PiB7XHJcbiAgICBjb25zdCBzb25nX3F1ZXVlICA9IHF1ZXVlLmdldChndWlsZC5pZCk7XHJcblxyXG4gICAgaWYoIXNvbmcpe1xyXG4gICAgICAgIHNvbmdfcXVldWUudm9pY2VfY2hhbm5lbC5sZWF2ZSgpO1xyXG4gICAgICAgIHF1ZXVlLmRlbGV0ZShndWlsZC5pZCk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgc3RyZWFtID0geXRkbChzb25nLnVybCx7ZmlsdGVyIDogJ2F1ZGlvb25seSd9KTtcclxuICAgIHNvbmdfcXVldWUuY29ubmVjdGlvbi5wbGF5KHN0cmVhbSwge3NlZWsgOiAwLCB2b2x1bWUgOiAxfSlcclxuICAgICAgICAub24oJ2ZpbmlzaCcsICgpID0+e1xyXG4gICAgICAgICAgICBzb25nX3F1ZXVlLnNvbmdzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIHZpZGVvX3BsYXllcihndWlsZCxzb25nX3F1ZXVlLnNvbmdzWzBdKTtcclxuICAgICAgICB9KTtcclxuICAgIGF3YWl0IHNvbmdfcXVldWUudGV4dF9jaGFubmVsLnNlbmQoYPCfjrYgTm93IHBsYXlpbmcgKioke3NvbmcudGl0bGV9KipgKVxyXG59XHJcbmNvbnN0IHNraXBfc29uZyA9IChtZXNzYWdlLCBzZXJ2ZXJfcXVldWUpID0+IHtcclxuICAgIGlmICghbWVzc2FnZS5tZW1iZXIudm9pY2UuY2hhbm5lbCkgcmV0dXJuIG1lc3NhZ2UuY2hhbm5lbC5zZW5kKCdZb3UgbmVlZCB0byBiZSBpbiBhIGNoYW5uZWwgdG8gZXhlY3V0ZSB0aGlzIGNvbW1hbmQhJyk7XHJcbiAgICBpZighc2VydmVyX3F1ZXVlKXtcclxuICAgICAgICByZXR1cm4gbWVzc2FnZS5jaGFubmVsLnNlbmQoYFRoZXJlIGFyZSBubyBzb25ncyBpbiBxdWV1ZSDwn5iUYCk7XHJcbiAgICB9XHJcbiAgICBzZXJ2ZXJfcXVldWUuY29ubmVjdGlvbi5kaXNwYXRjaGVyLmVuZCgpO1xyXG59XHJcblxyXG5jb25zdCBzdG9wX3NvbmcgPSAobWVzc2FnZSwgc2VydmVyX3F1ZXVlKSA9PiB7XHJcbiAgICBpZiAoIW1lc3NhZ2UubWVtYmVyLnZvaWNlLmNoYW5uZWwpIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZCgnWW91IG5lZWQgdG8gYmUgaW4gYSBjaGFubmVsIHRvIGV4ZWN1dGUgdGhpcyBjb21tYW5kIScpO1xyXG4gICAgc2VydmVyX3F1ZXVlLnNvbmdzID0gW107XHJcbiAgICBzZXJ2ZXJfcXVldWUuY29ubmVjdGlvbi5kaXNwYXRjaGVyLmVuZCgpO1xyXG59Il19